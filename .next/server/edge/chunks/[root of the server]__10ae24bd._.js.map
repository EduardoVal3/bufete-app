{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nexport function middleware(request: NextRequest) {\r\n  const token = request.cookies.get('token')?.value;\r\n\r\n  if (!token) {\r\n    return NextResponse.next();\r\n  }\r\n\r\n  let user;\r\n  try {\r\n    const decodedToken = jwtDecode<{ \"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\": string }>(token);\r\n    user = { role: decodedToken[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"] };\r\n  } catch {\r\n    return NextResponse.redirect(new URL('/auth/login', request.url));\r\n  }\r\n\r\n  const pathname = request.nextUrl.pathname;\r\n\r\n  if (pathname.startsWith('/dashboard') && user.role !== 'SuperAdmin' && user.role !== 'Administrador') {\r\n    return NextResponse.redirect(new URL('/', request.url));\r\n  }\r\n\r\n  if (pathname.startsWith('/perfil') && user.role !== 'Cliente') {\r\n    return NextResponse.redirect(new URL('/', request.url));\r\n  }\r\n\r\n  if (pathname.startsWith('/area-de-trabajo') && user.role !== 'Abogado') {\r\n    return NextResponse.redirect(new URL('/', request.url));\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: ['/dashboard/:path*', '/perfil/:path*', '/area-de-trabajo/:path*'],\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAEA;;;AAEO,SAAS,WAAW,OAAoB;IAC7C,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,UAAU;IAE5C,IAAI,CAAC,OAAO;QACV,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;IAC1B;IAEA,IAAI;IACJ,IAAI;QACF,MAAM,eAAe,CAAA,GAAA,8JAAA,CAAA,YAAS,AAAD,EAA8E;QAC3G,OAAO;YAAE,MAAM,YAAY,CAAC,+DAA+D;QAAC;IAC9F,EAAE,OAAM;QACN,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,eAAe,QAAQ,GAAG;IACjE;IAEA,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IAEzC,IAAI,SAAS,UAAU,CAAC,iBAAiB,KAAK,IAAI,KAAK,gBAAgB,KAAK,IAAI,KAAK,iBAAiB;QACpG,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;IACvD;IAEA,IAAI,SAAS,UAAU,CAAC,cAAc,KAAK,IAAI,KAAK,WAAW;QAC7D,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;IACvD;IAEA,IAAI,SAAS,UAAU,CAAC,uBAAuB,KAAK,IAAI,KAAK,WAAW;QACtE,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;IACvD;IAEA,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;QAAqB;QAAkB;KAA0B;AAC7E"}}]
}